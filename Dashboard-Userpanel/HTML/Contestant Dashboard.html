<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contestant Dashboard</title>
  <link rel="stylesheet" href="/Dashboard-Userpanel/CSS/Contestant Dashboard.css" />
  <link rel="stylesheet" href="/Dashboard-Userpanel/CSS/style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <link rel="icon" type="image/x-icon" href="/PUBLIC-IMAGES/logo-bgr.png" />
</head>

<body class="light">
  <div id="loader"></div>
  <div class="dashboard" style="display:none;" id="mainContent">
    <!-- Sidebar -->
    <aside class="sidebar">
      <h2>🎀CrownVista</h2>
      <ul class="nav-list">
        <li class="btn">
          <a href="/Dashboard-Userpanel/Dashboard-userpanel.html" class="link-none">
            <i class="fas fa-home"></i><span>Dashboard</span>
          </a>
        </li>
        <li class="btn active">
          <a href="/Dashboard-Userpanel/HTML/Contestant Dashboard.html" class="link-none">
            <i class="fas fa-user-edit"></i><span>Contestant</span>
          </a>
        </li>
        <li class="btn">
          <a href="/Dashboard-Userpanel/HTML/Media Upload.html" class="link-none">
            <i class="fas fa-photo-video"></i><span>Media Upload</span>
          </a>
        </li>
        <li class="btn">
          <a href="/Dashboard-Userpanel/HTML/View Judging Criteria.html" class="link-none">
            <i class="fas fa-balance-scale"></i><span>Judging Criteria</span>
          </a>
        </li>
        <li class="btn">
          <a href="/Dashboard-Userpanel/HTML/Get Newsletters.html" class="link-none">
            <i class="fas fa-newspaper"></i><span>Newsletters</span>
          </a>
        </li>
      </ul>
      <button id="toggle-theme" class="btn btn-light w-100 mt-5 d-flex align-items-center justify-content-center">
        <span class="me-2" id="theme-icon">🌙</span>
      </button>
    </aside>
  </div>

  <div class="main">
    <!-- Topbar -->
    <nav class="topbar">
      <!-- Application Tracking Section -->
      <div class="d-flex align-items-center gap-2 search-bar">
        <input type="text" id="applicationId" placeholder="Enter Application ID" required
          oninvalid="this.setCustomValidity('Please fill out Application ID')" oninput="this.setCustomValidity('')"
          style="max-width: 220px;" />
        <button>Track</button>
      </div>

      <!-- Profile Icon with Dropdown -->
      <div class="dropdown">
        <button class="btn border-0 bg-transparent d-flex align-items-center" type="button" id="profileDropdown"
          data-bs-toggle="dropdown" aria-expanded="false">
          <i class="fas fa-user-circle fs-4 text-dark me-1"></i>
          <i class="fa-solid fa-chevron-down" id="dropdownArrow"></i>
        </button>

        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
          <li>
            <a class="dropdown-item d-flex align-items-center gap-2" href="/index.html">
              <img src="/Dashboard-Userpanel/public/logout-btn-bgr.png" width="18" height="18" alt="Logout" />
              Logout
            </a>
          </li>
        </ul>
      </div>
    </nav>

    <div class="fashion-show-cards row row-cols-1 row-cols-lg-3 g-4 p-4">
      <div class="col">
        <div class="card fashion-card h-100">
          <img src="https://images.unsplash.com/photo-1503342217505-b0a15ec3261c?auto=format&fit=crop&w=600&q=80"
            class="card-img-top" alt="Fashion Show 1" />
          <div class="card-body">
            <h5 class="card-title">Glamour Runway 2025</h5>
            <p class="event-date"><i class="fas fa-calendar-alt"></i> 15 July 2025</p>
            <p class="card-text">Experience the latest trends and bold designs from top designers worldwide.</p>
            <button class="apply-btn btn btn-primary" data-bs-toggle="modal" data-bs-target="#eventModal">
              Apply Now
            </button>
            <button class="instructions-btn btn btn-outline-secondary mt-2" data-bs-toggle="modal"
              data-bs-target="#eventInstructionModal"
              data-instructions="Please arrive 2 hours before the event. Bring valid ID and confirmation email. Dress code: Formal wear.">
              Instructions
            </button>
          </div>
        </div>
      </div>

      <div class="col">
        <div class="card fashion-card h-100">
          <img src="https://images.unsplash.com/photo-1521334884684-d80222895322?auto=format&fit=crop&w=600&q=80"
            class="card-img-top" alt="Fashion Show 2" />
          <div class="card-body">
            <h5 class="card-title">Urban Chic Fashion Fest</h5>
            <p class="event-date"><i class="fas fa-calendar-alt"></i> 22 August 2025</p>
            <p class="card-text">Showcase your unique style on the city’s most stylish runway stage.</p>
            <button class="apply-btn btn btn-primary" data-bs-toggle="modal" data-bs-target="#eventModal">
              Apply Now
            </button>
            <button class="instructions-btn btn btn-outline-secondary mt-2" data-bs-toggle="modal"
              data-bs-target="#eventInstructionModal"
              data-instructions="Arrive by 1 PM. Bring portfolio and ID. Smart casual dress code required.">
              Instructions
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Your modals -->
  <div class="modal fade" id="eventModal" tabindex="-1" aria-labelledby="eventModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <form id="applicationForm" class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="eventModalLabel">Apply for Fashion Show</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <input type="text" id="fullName" class="form-control mb-3" placeholder="Full Name" required
            oninvalid="this.setCustomValidity('Please fill out the full name field')"
            oninput="this.setCustomValidity('')" />
          <input type="email" id="email" class="form-control mb-3" placeholder="Email" required
            oninvalid="this.setCustomValidity('Please fill out the email field')"
            oninput="this.setCustomValidity('')" />
          <input type="tel" id="phone" class="form-control mb-3" placeholder="Phone Number" required pattern="[0-9]{10}"
            maxlength="10" onkeypress="return event.charCode >= 48 && event.charCode <= 57"
            oninvalid="this.setCustomValidity('Please enter a valid 10-digit phone number')"
            oninput="this.setCustomValidity('')" />

          <input type="text" id="city" class="form-control mb-3" placeholder="City" required
            oninvalid="this.setCustomValidity('Please fill out the city field')" oninput="this.setCustomValidity('')" />
          <label class="form-label">Upload Photo</label>
          <input type="file" id="photo" class="form-control mb-2" accept="image/*" required
            oninvalid="this.setCustomValidity('Please upload a photo')" oninput="this.setCustomValidity('')" />
          <div id="photoPreview" class="mb-3 text-center"></div>

          <label class="form-label">Upload Document</label>
          <input type="file" id="document" class="form-control mb-2" required
            oninvalid="this.setCustomValidity('Please upload a document')" oninput="this.setCustomValidity('')" />
          <div id="documentPreview" class="mb-3 text-center"></div>

        </div>
        <div class="modal-footer d-flex justify-content-center">
          <button type="submit" class="btn btn-primary px-4">Submit Application</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Event Instructions Modal -->
  <div class="modal fade" id="eventInstructionModal" tabindex="-1" aria-labelledby="eventInstructionLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content p-4">
        <div class="modal-header">
          <h5 class="modal-title" id="eventInstructionLabel">Event Instructions</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id="eventInstructionsContent">
          <p>Loading instructions...</p>
        </div>
        <div class="modal-footer justify-content-center">
          <button class="btn btn-secondary px-4" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div id="successToast" class="toast align-items-center text-bg-success border-0 position-fixed bottom-0 end-0 m-3"
    role="alert">
    <div class="d-flex">
      <div class="toast-body">Application submitted successfully!</div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto"
        onclick="document.getElementById('successToast').style.display='none';"></button>
    </div>
  </div>


  <script>
    // Load event instructions into modal
    document.querySelectorAll(".instructions-btn").forEach(button => {
      button.addEventListener("click", function () {
        const instructions = this.getAttribute("data-instructions");
        document.getElementById("eventInstructionsContent").textContent = instructions;
      });
    });

    const toggleBtn = document.getElementById("toggle-theme");
    const themeIcon = document.getElementById("theme-icon");
    const body = document.body;
    const icon = document.querySelector('.fa-user-circle');
    const dropdownMenu = document.querySelector('.dropdown-menu');

    // Theme toggle and update styles
    function updateTheme(isDark) {
      if (isDark) {
        icon.classList.remove('text-dark');
        icon.classList.add('text-light');
        dropdownMenu.classList.add('dropdown-menu-dark');
      } else {
        icon.classList.remove('text-light');
        icon.classList.add('text-dark');
        dropdownMenu.classList.remove('dropdown-menu-dark');
      }
    }

    toggleBtn.addEventListener("click", () => {
      const isDark = body.classList.toggle("dark");
      themeIcon.textContent = isDark ? "☀️" : "🌙";
      updateTheme(isDark);
    });

    // Initialize theme on page load
    updateTheme(body.classList.contains("dark"));

    // Sidebar active state management
    const items = document.querySelectorAll(".nav-list li");
    items.forEach(item => {
      item.addEventListener("click", () => {
        items.forEach(i => i.classList.remove("active"));
        item.classList.add("active");
      });
    });

    const dropdown = document.getElementById('profileDropdown');
    const arrowIcon = document.getElementById('dropdownArrow');

    dropdown.addEventListener('click', () => {
      setTimeout(() => {
        const isExpanded = dropdown.getAttribute('aria-expanded') === 'true';
        arrowIcon.classList.toggle('fa-chevron-down', !isExpanded);
        arrowIcon.classList.toggle('fa-chevron-up', isExpanded);
      }, 50); // Wait for Bootstrap to update aria-expanded
    });

    window.addEventListener('load', function () {
      const loader = document.getElementById('loader');
      const mainContent = document.getElementById('mainContent');
      loader.style.display = 'none';      // Loader chhupao
      mainContent.style.display = 'block'; // Main content dikhao
    });

    // Photo preview
    document.getElementById('photo').addEventListener('change', function (e) {
      const preview = document.getElementById('photoPreview');
      preview.innerHTML = ''; // Clear previous
      const file = e.target.files[0];
      if (file && file.type.startsWith('image/')) {
        const img = document.createElement('img');
        img.src = URL.createObjectURL(file);
        img.alt = "Photo Preview";
        img.className = "img-thumbnail";
        img.style.maxWidth = '150px';
        img.style.marginTop = '10px';
        preview.appendChild(img);
      }
    });

    // Document preview
    document.getElementById('document').addEventListener('change', function (e) {
      const preview = document.getElementById('documentPreview');
      preview.innerHTML = ''; // Clear previous
      const file = e.target.files[0];
      if (file) {
        const fileInfo = document.createElement('p');
        fileInfo.textContent = `Selected File: ${file.name}`;
        fileInfo.style.marginTop = '10px';
        preview.appendChild(fileInfo);
      }
    });

    // Optional: Get current page name
    const currentPage = window.location.pathname.split("/").pop();
  </script>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>